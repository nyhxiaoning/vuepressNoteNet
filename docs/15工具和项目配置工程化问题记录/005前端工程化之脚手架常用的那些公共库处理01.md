![æˆé•¿](/images/home.png)

[[toc]]
## å›åˆ°åšå®¢ä¸»é¡µ
[åšå®¢é¦–é¡µ](./../README.md)  


### è¯´æ˜
è¿™é‡Œæ˜¯å¯¹äº[å‰ç«¯å„ç§æ¡†æ¶åº“çš„è§£å†³æ–¹æ¡ˆçš„è¡¥å……](https://www.processon.com/mindmap/6214476d079129079ad749e1)
æ¯”å¦‚vue-requestå°±ä¸å‡ºç°åœ¨ä¸‹é¢


### vue-requestå’ŒaxiosåŒºåˆ«

~~~
ğŸŒˆ  å…¼å®¹ Vue 2 & 3
ğŸš€  æ‰€æœ‰æ•°æ®éƒ½å…·æœ‰å“åº”å¼
ğŸ”„  è½®è¯¢è¯·æ±‚ï¼špollingInterval: 1000, // è¯·æ±‚é—´éš”æ—¶é—´
ğŸ¤–  è‡ªåŠ¨å¤„ç†é”™è¯¯é‡è¯•
ğŸ—„  å†…ç½®è¯·æ±‚ç¼“å­˜
ğŸ’§  èŠ‚æµè¯·æ±‚ä¸é˜²æŠ–è¯·æ±‚
ğŸ¯  èšç„¦é¡µé¢æ—¶è‡ªåŠ¨é‡æ–°è¯·æ±‚ï¼šå½“ç”µè„‘åœ¨ä¼‘çœ çŠ¶æ€é‡æ–°æ¿€æ´»åï¼Œé¡µé¢çš„æ•°æ®éœ€è¦åŒæ­¥åˆ°æœ€æ–°çŠ¶æ€æ—¶ã€‚ï¼ˆ  refreshOnWindowFocus: true,refocusTimespan: 1000, // è¯·æ±‚é—´éš”æ—¶é—´ï¼‰
âš™ï¸  å¼ºå¤§çš„åˆ†é¡µæ‰©å±•ä»¥åŠåŠ è½½æ›´å¤šæ‰©å±•
ğŸ“   å®Œå…¨ä½¿ç”¨ Typescript ç¼–å†™ï¼Œå…·æœ‰å¼ºå¤§çš„ç±»å‹æç¤º
âš¡ï¸  å…¼å®¹ Vite
ğŸƒ  è½»é‡åŒ–
ğŸ“¦  å¼€ç®±å³ç”¨
## æ³¨æ„ä½¿ç”¨v2.xç‰ˆæœ¬æ”¯æŒvue2,3,å¦‚æœæ˜¯v1.xç‰ˆæœ¬ï¼Œæ”¯æŒvue3

vuerequestç›®çš„
åœ¨ä»¥å¾€çš„ä¸šåŠ¡é¡¹ç›®ä¸­ï¼Œå¸¸å¸¸è¢« loading çŠ¶æ€çš„ç®¡ç†ã€è¯·æ±‚çš„èŠ‚æµé˜²æŠ–ã€æ¥å£æ•°æ®çš„ç¼“å­˜ã€åˆ†é¡µç­‰è¿™äº›é‡å¤çš„å®ç°æ‰€å›°æƒ‘ã€‚æ¯å½“å¼€å¯ä¸€ä¸ªæ–°é¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬éƒ½å¾—æ‰‹åŠ¨å»å¤„ç†ä»¥ä¸Šè¿™äº›é—®é¢˜ï¼Œè¿™å°†æ˜¯ä¸€ä¸ªé‡å¤æ€§çš„å·¥ä½œï¼Œè€Œä¸”è¿˜å¾—ç¡®ä¿å›¢é˜Ÿçš„ä¸€è‡´ã€‚
VueRequest æ—¨åœ¨ä¸ºå¼€å‘è€…æä¾›ä¾¿æ·ã€å¿«é€Ÿçš„æ–¹å¼æ¥ç®¡ç†æ¥å£çš„çŠ¶æ€ã€‚åœ¨ä¸šåŠ¡å¼€å‘ä¸­çœå»ä¸Šè¿°çš„é‚£äº›â€œè„æ´»ç´¯æ´»â€ï¼Œåªéœ€è¦ç®€å•çš„é…ç½®å³å¯ä½¿ç”¨ï¼Œä¸“æ³¨äºä¸šåŠ¡æ ¸å¿ƒçš„å¼€å‘ã€‚

é‚£å’Œaxioså¦‚ä½•ä¸€èµ·ä½¿ç”¨ã€‚
æ¢å¥è¯è¯´ï¼Œä½ å¯ä»¥ä½¿ç”¨ ç¬¬ä¸‰æ–¹çš„è¯·æ±‚åº“ï¼ˆå¦‚ axios ï¼‰ æ¥è·å–æ•°æ®ï¼Œç„¶åå°†è¯¥è¯·æ±‚ä¼ ç»™ VueRequest æ¥è¿›è¡Œç®¡ç†ã€‚
import { useRequest } from 'vue-request';
import axios from 'axios';

const getUser = userName => {
  return axios.get('api/user', {
    params: {
      name: userName,
    },
  });
};

const { data, run } = useRequest(getUser, {
  defaultParams: ['é©¬å†¬æ¢…'],
});

// ...
run('å¼ ä¸‰');

~~~
## 1.ç»Ÿä¸€å¤„ç†å½“å‰çš„httpå’ŒæŠ¥é”™ä¿¡æ¯çš„å°è£…æ¨¡å—
vue2ç‰ˆæœ¬
vue3ç‰ˆæœ¬
æœ€æ–°vue3-tsç‰ˆæœ¬
 https://gitee.com/nyhxiaoning/tov-template.git

åˆ©ç”¨vue-requestå’Œaxioså°è£…httpsè¯·æ±‚å’ŒæŠ¥é”™å¤„ç†ã€‚


## 2.å‰ç«¯å¯¹äºæ•°å­—çš„å¤„ç†åº“
### å¤„ç†æ•°å­—çš„å·¥å…·åº“ï¼ˆæ³¨æ„ï¼šä½†æ˜¯ä¸è§£å†³ç²¾åº¦é—®é¢˜ï¼‰
math.js

### å¤„ç†å‰ç«¯çš„å¤§æ•°å­—çš„ç²¾åº¦ä¸¢å¤±

json-bigintè§£å†³jsçš„å¤§æ•´æ•°çš„å‘çš„ç²¾åº¦ä¸¢å¤±
~~~

ES6 å¼•å…¥äº†Number.MAX_SAFE_INTEGERå’ŒNumber.MIN_SAFE_INTEGERè¿™ä¸¤ä¸ªå¸¸é‡ï¼Œç”¨æ¥è¡¨ç¤ºè¿™ä¸ªèŒƒå›´çš„ä¸Šä¸‹é™ã€‚
è¶…å‡º 2 çš„ 53 æ¬¡æ–¹ä¹‹åï¼Œä¸€ä¸ªæ•°å°±ä¸ç²¾ç¡®äº†ã€‚
import jsonBig from 'json-bigint'

var json = '{ "value" : 9223372036854775807, "v2": 123 }'

è¿˜å¯ä»¥åœ¨å°è£…çš„axiosä¸­å¤„ç†å†…å®¹ï¼šAxios æä¾›è‡ªå®šä¹‰å¤„ç†åŸå§‹åç«¯è¿”å›æ•°æ®çš„ APIï¼štransformResponse ã€‚
import axios from 'axios'

import jsonBig from 'json-bigint'

var json = '{ "value" : 9223372036854775807, "v2": 123 }'

console.log(jsonBig.parse(json))

const request = axios.create({
  baseURL: 'ä½ æ¥å£çš„åŸºç¡€è·¯å¾„', // æ¥å£åŸºç¡€è·¯å¾„

  // transformResponse å…è®¸è‡ªå®šä¹‰åŸå§‹çš„å“åº”æ•°æ®ï¼ˆå­—ç¬¦ä¸²ï¼‰
  transformResponse: [function (data) {
    try {
      // å¦‚æœè½¬æ¢æˆåŠŸåˆ™è¿”å›è½¬æ¢çš„æ•°æ®ç»“æœ
      return jsonBig.parse(data)
    } catch (err) {
      // å¦‚æœè½¬æ¢å¤±è´¥ï¼Œåˆ™åŒ…è£…ä¸ºç»Ÿä¸€æ•°æ®æ ¼å¼å¹¶è¿”å›
      return {
        data
      }
    }
  }]
})

export default request

~~~

### ç¬¬ä¸‰æ–¹çš„è¯·æ±‚åº“
#### å¤„ç†bignumber.js
ç”¨äºä»»æ„ç²¾åº¦ç®—æœ¯çš„ JavaScript åº“ã€‚
BigNumber.js çš„toFixed æ¥è§£å†³æµ®ç‚¹æ•°è¿ç®—å¯¼è‡´çš„å„ç§å„æ ·çš„é—®é¢˜ã€‚
#### decimal.js
ç”¨äº JavaScript çš„ä»»æ„ç²¾åº¦åè¿›åˆ¶ç±»å‹ã€‚
~~~
new Decimal('0.046875000000')            // '0.046875'

~~~

### è§£å†³ç²¾åº¦çš„è®¡ç®—ä¿ç•™å°æ•°çš„åœŸåŠæ³•:å˜æˆæ•´æ•°

JSæµ®ç‚¹æ•°åšä¹˜æ³•è¿ç®—å¯¼è‡´ç²¾åº¦ä¸¢å¤±çš„é—®é¢˜.
åŸå› å…¶å®å°±æ˜¯js numberç±»å‹è¿ç®—éƒ½éœ€è¦å…ˆå°†åè¿›åˆ¶è½¬äºŒè¿›åˆ¶

~~~
JS æ•°å­—ç±»å‹åªæœ‰numberç±»å‹ï¼Œnumberç±»å‹ç›¸å½“äºå…¶ä»–å¼ºç±»å‹è¯­è¨€ä¸­çš„doubleç±»å‹(åŒç²¾åº¦æµ®ç‚¹å‹)ï¼Œä¸åŒºåˆ†æµ®ç‚¹å‹å’Œæ•´æ•°å‹.
ç”±äºJsçš„æ‰€æœ‰æ•°å­—ç±»å‹éƒ½æ˜¯åŒç²¾åº¦æµ®ç‚¹å‹(64ä½)é‡‡ç”¨ IEEE754 æ ‡å‡†

64ä½äºŒè¿›åˆ¶æ•°è¡¨ç¤ºä¸€ä¸ªnumberæ•°å­—

å…¶ä¸­ 64ä½ = 1ä½ç¬¦å·ä½ + 11ä½æŒ‡æ•°ä½ + 52ä½å°æ•°ä½
ç¬¦å·ä½ï¼šç”¨æ¥è¡¨ç¤ºæ•°å­—çš„æ­£è´Ÿï¼Œ-1^ç¬¦å·ä½æ•°å€¼ï¼Œ0ä¸ºæ­£æ•°ï¼Œ1ä¸ºè´Ÿæ•°

æŒ‡æ•°ä½ï¼šä¸€èˆ¬éƒ½ç”¨ç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºæ•°å€¼å¤§å°ï¼Œä½†æ˜¯è¿™é‡Œä¸€èˆ¬éƒ½æ˜¯2è¿›åˆ¶çš„ç§‘å­¦è®¡æ•°æ³•ï¼Œè¡¨ç¤º2çš„å¤šå°‘æ¬¡æ–¹

å°æ•°ä½ï¼šç§‘å­¦è®¡æ•°æ³•å‰é¢çš„æ•°å€¼ï¼ŒIEEE745æ ‡å‡†ï¼Œé»˜è®¤æ‰€æœ‰çš„è¯¥æ•°å€¼éƒ½è½¬ä¸º1.xxxxxè¿™ç§æ ¼å¼ï¼Œä¼˜ç‚¹æ˜¯å¯ä»¥çœç•¥ä¸€ä½å°æ•°ä½ï¼Œå¯ä»¥å­˜å‚¨æ›´å¤šçš„æ•°å­—å†…å®¹ï¼Œç¼ºç‚¹æ˜¯ä¸¢å¤±ç²¾åº¦.

å¦‚æœæ˜¯æ•´æ•°è½¬æ¢ï¼šæ•´æ•°è½¬äºŒè¿›åˆ¶ï¼Œé™¤2å–ä½™ï¼Œé‚£ä¹ˆ7è¡¨ç¤ºä¸º 111 = 1x2^3 + 1x2^2 + 1x2^1
å¦‚æœæ˜¯å°æ•°è½¬æ¢ï¼šå°æ•°çš„è½¬åŒ–äºŒè¿›åˆ¶è¿‡ç¨‹æ˜¯é€šè¿‡åˆ¤æ–­å°æ•°æ˜¯ä¸æ˜¯æ»¡ 1/2ï¼Œ1/4ï¼Œ8/1ä»¥æ­¤ç±»æ¨ï¼Œæ¢æˆæ•°å­¦å…¬å¼å°±æ˜¯ ä¹˜äºŒå–æ•´æ³•ã€‚
é‚£ä¹ˆï¼š 0.1 => 0.0001 1001 1001 1001â€¦ï¼ˆæ— é™å¾ªç¯ï¼‰å­˜å‚¨èµ·æ¥ã€‚



console.log(2.567*100);//ç»“æœæ˜¯æµ®ç‚¹æ•°ï¼Œé‚£ä¹ˆç²¾åº¦ä¸¢å¤±ï¼Œ256.70000000000005 
console.log(2.56-3);//æµ®ç‚¹æ•°å‡æ³•ï¼Œç²¾åº¦ä¸¢å¤±,-0.43999999999999995
console.log(2.33*100);//ç»“æœæ˜¯æ•´æ•°ï¼Œç²¾åº¦æ²¡æœ‰ä¸¢233,ä¸€èˆ¬ä¿é™©èµ·è§ï¼Œå¤šä¹˜10ï¼Œåé™¤ä»¥10
console.log(0.34*1000/10)

æœ‰ä¸ªå‘ï¼Œä¸è¦å†æ§åˆ¶å°åšæµ‹è¯•ï¼Œæ§åˆ¶å°è¿›è¡Œäº†ä¼˜åŒ–å¤„ç†
~~~



## è§£å†³æ¡†æ¶ä¸­æŠ¥é”™çš„é—®é¢˜
[å¤„ç†awaitçš„æŠ¥é”™è¯¯é—®é¢˜](https://app.yinxiang.com/shard/s37/nl/24388549/5bb546b1-1047-4c54-afc2-3f70d7ab42fe)

[jsä¸­å¼‚æ­¥å®ç°æ–¹æ¡ˆ](https://app.yinxiang.com/shard/s37/nl/24388549/30c25a2d-fcb5-47ac-b1e2-38e6cfc76319)

[å‰ç«¯é”™è¯¯å¤„ç†æ±‡æ€»ç¯‡](https://juejin.cn/post/6979564690787532814)

[å‰ç«¯é”™è¯¯å¤„ç†æ±‡æ€»01](https://app.yinxiang.com/shard/s37/nl/24388549/bc25dd43-2ddb-472f-ac5c-05330f540e80)


~~~
é”™è¯¯ç±»å‹çš„æ€»ç»“
åŒæ­¥é”™è¯¯ => å¯ä»¥è¢«1.try...catch 2.window.onerror 3.process.on('uncaughtException')æ•è·ã€‚

å¼‚æ­¥é”™è¯¯ => ä¾‹å¦‚setIntervalã€æ²¡æœ‰è¢«awaitçš„å¼‚æ­¥å‡½æ•°ç­‰ï¼Œæ˜¯ä¸ä¼šè¢«try...catchæ•è·çš„ï¼Œä½†æ˜¯ä¼šè¢«window.onerrorå’Œprocess.on('uncaughtException')æ•è·ã€‚

Promiseé”™è¯¯ => Promise.reject(new Error('some wrong'));åƒæ˜¯è¿™æ ·çš„promiseé”™è¯¯ï¼Œæ˜¯ä¸ä¼šè¢«window.onerrorå’Œprocess.on('uncaughtException')æ•è·çš„ï¼Œæ›´ä¸ä¼šè¢«try...catchæ•è·ï¼Œæƒ³è¦æ•è·å®ƒä»¬åªèƒ½ï¼Œprocess.on('unhandledRejection')ä»¥åŠwindow.addEventListener('unhandledrejection')

è¡¥å……é”™è¯¯å›¾ç‰‡å’ŒéŸ³é¢‘èµ„æºåŠ è½½é™æ€èµ„æºcss,jsåŠ è½½é”™è¯¯
unhandledRejectionçš„å…¼å®¹æ€§å¾ˆå·®ï¼Œè¿˜æœ‰å®¢æˆ·ç«¯onerroräº‹ä»¶æ˜¯ä¸èƒ½æ•è·åˆ°å›¾ç‰‡éŸ³è§†é¢‘åŠ è½½å‡ºé”™åŠå…¶ä»–é™æ€èµ„æºï¼ˆå¦‚js,cssç­‰404ï¼‰çš„é”™è¯¯çš„ï¼Œå¯ä»¥ä½¿ç”¨addEventListeneråœ¨æ•è·é˜¶æ®µæ•è·ã€‚
<script src="https://cdn.xxx.com/js/test.js"  onerror="errorHandler(this)"></script>

<link rel="stylesheet" href="https://cdn.xxx.com/styles/test.css" onerror="errorHandler(this)">

window.addEventListener('error', (errorEvent) => {
    console.log(errorEvent)
    cosnole.log(errorEvent.message)
}, true)
éœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œæ‹¿åˆ°çš„æ˜¯ä¸€ä¸ªeventäº‹ä»¶ï¼Œå’Œå‰é¢ä¸ä¸€æ ·ï¼Œæ‹¿åˆ°çš„å¹¶ä¸æ˜¯ä¸€ä¸ªerrorå¯¹è±¡ã€‚

----------------------
æ³¨æ„ï¼šåœ¨å±€éƒ¨è¢«try...catchäº†çš„é”™è¯¯æ˜¯ä¸ä¼šç»§ç»­å¾€ä¸Šå±‚æŠ›å‡ºäº†çš„ï¼Œæ‰€ä»¥å…¨å±€å¤„ç†çš„æ•è·æ˜¯è‚¯å®šæ•è·ä¸åˆ°çš„ï¼Œé™¤éåœ¨catchåˆ°ä»¥åå¤„ç†å®Œæˆï¼Œå°†é”™è¯¯ç»§ç»­å‘ä¸Šå±‚throwã€‚


~~~



### 004å¤„ç†consoleImporterå¿«é€Ÿå®‰è£…consoleæ§åˆ¶å°çš„npmåŒ…
~~~
Console importer
æ³¨æ„ï¼šchromeæµè§ˆå™¨å¯ä»¥ï¼Œå…³é—­å®‰å…¨çš„é™åˆ¶ï¼š--disable-web-security --user-data-dir=C:\MyChromeDevUserData
ä½†æ˜¯edgeåŒæ ·é…ç½®ï¼Œç„¶åé€‰æ‹©csdnæˆ–æ˜¯å…¶ä»–çš„ä¸€äº›ä¸ªäººå½“å‰æ‰€åœ¨ç½‘ç«™ï¼Œæ³¨æ„é€‰æ‹©ç´ æœ‰ç«™ç‚¹å¯ç”¨ã€‚
1. å®‰è£…Console Importeræ’ä»¶
2. $i('name')å®‰è£…npmåŒ…

å…·ä½“å®‰è£…åŒ…é“¾æ¥
https://app.yinxiang.com/shard/s37/nl/24388549/17eae8d6-ba10-44bf-ace2-f2aedf12eb86


~~~